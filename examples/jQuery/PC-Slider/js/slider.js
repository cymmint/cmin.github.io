/***!
 * origin: 摘星少年个人博客。
 * createtime: 2018-01-31
 * author: cmin
 * Copyright(c) 2018 http://cmin.me/
 */
!function($){$.fn.slider=function(opts){var define={effect:"fade",axis:"x",emit:"mouseenter",isAuto:!0,isDot:!0,isDotBg:!1,isDotNum:!1,isDotEmit:!0,isPN:!0,isPNOpen:!0,isPNTxt:!0,isQuick:!0,isLoop:!0,speed:5e3,effectTime:500,onset:0,callback:null},methods={config:function(){opts=$.extend({},define,opts),opts.effect=(opts.effect+"").toLowerCase(),opts.emit=/^(mouseenter|click|dbclick)$/i.test(opts.emit)?opts.emit.toLowerCase():"mouseenter",opts.effectTime=/^\d+$/.test(opts.effectTime)?opts.effectTime:500,opts.onset=/^\d+$/.test(opts.onset)?opts.onset:0,opts.isAuto&&(opts.speed=/^\d+$/.test(opts.speed)?opts.speed:5e3,opts.speed/2<=opts.effectTime&&(opts.effectTime=opts.speed/2)),"rect"==opts.effect&&(opts.axis=/^(x|y)$/i.test(opts.axis)?opts.axis.toLowerCase():"x")},init:function($this,args){var htm="",str="";try{if(args.img=$this.find(".fs-img").children(),args.count=args.img.length,args.cid=opts.onset>=args.count?0:opts.onset,args.nid=args.cid,args.dir=null,args.time=0,opts.isDotBg&&(htm+='<div class="fs-d_bg"></div>'),opts.isDot){htm+='<div class="fs-dot">';for(var i=0;i<args.count;i++)str=args.cid==i?"class=on >":">",htm+=opts.isDotNum?"<a "+str+(i+1)+"</a>":"<a "+str+"</a>";htm+="</div>"}return opts.isPN&&(str=opts.isPNOpen?' style="display:block" ':' style="display:none" ',htm+='<a class="fs-prev"'+str+">"+(opts.isPNTxt?"&lt;":"")+'</a><a class="fs-next"'+str+">"+(opts.isPNTxt?"&gt;":"")+"</a>"),$this.append(htm),/^(slide|rect)$/.test(opts.effect)||args.img.eq(args.nid).css("display","block"),"slide"==opts.effect&&(args.img.parent().addClass(opts.effect),args.img.eq(args.nid).css("left","0")),"rect"==opts.effect&&(args.size="x"==opts.axis?$this.find(".fs-img").width():$this.find(".fs-img").height(),args.img.wrapAll('<div class="rect '+opts.axis+'"></div>'),args.rect=$this.find(".rect"),str="x"==opts.axis?"width":"height",args.rect.css(str,opts.isLoop?(args.count+2)*args.size:args.count*args.size),args.img.css(str,args.size),opts.isLoop&&(args.rect.prepend(args.img.eq(-1).clone()),args.rect.append(args.img.eq(0).clone())),str="x"==opts.axis?"left":"top",args.offset=opts.isLoop?-args.size*(args.nid+1):-args.size*args.nid,args.rect.css(str,args.offset)),$.support.opacity||$this.find("a").attr("hidefocus",!0),!0}catch(e){return!1}},dot:function(args){opts.isDot&&args.dot.removeClass("on").eq(args.nid).addClass("on")},callback:function(args){$.isFunction(opts.callback)&&opts.callback.call(args)},fade:function(args){var _this=this;args.img.eq(args.cid).stop(!0,!1).fadeOut(opts.effectTime),args.img.eq(args.nid).stop(!0,!1).fadeIn(opts.effectTime,function(){_this.callback(args)}),_this.dot(args)},slide:function(args){var _this=this;args.img.eq(args.cid).stop(!0,!0).animate({left:"l"==args.dir?"-100%":"100%"},opts.effectTime),args.img.eq(args.nid).stop(!0,!0).css("left","l"==args.dir?"100%":"-100%").animate({left:"0"},opts.effectTime,function(){_this.callback(args)}),_this.dot(args)},rect:function(args){var _this=this,attr={},dir="x"==opts.axis?"left":"top";args.offset=opts.isLoop?-args.size*(args.nid+1):-args.size*args.nid,opts.isLoop&&(args.cid==args.count-1&&0==args.nid&&(args.offset=-args.size*(args.count+1)),args.nid==args.count-1&&0==args.cid&&(args.offset=0)),attr[dir]=args.offset,args.rect.stop(!0,!1).animate(attr,opts.effectTime,function(){opts.isLoop&&(args.offset=-args.size*(args.nid+1),args.rect.css(dir,args.offset)),_this.callback(args)}),_this.dot(args)},effect:function(args){switch(opts.effect){case"slide":methods.slide(args);break;case"rect":methods.rect(args);break;case"fade":default:methods.fade(args)}},clear:function(args){clearInterval(args.time)},btnDot:function(args){var _this=this;args.dot.on(opts.emit,function(){if(_this.quick(args)){var _self=$(this);_self.is(".on")||(args.cid=args.dot.siblings(".on").index(),args.nid=_self.index(),args.dir=args.cid<args.nid?"l":"r",_this.effect(args))}})},quick:function(args){return"rect"==opts.effect&&opts.isLoop?!args.rect.is(":animated"):!!opts.isQuick||!args.img.eq(args.cid).is(":animated")},btnLR:function(args){var _this=this;args.prev.on("click",function(){_this.quick(args)&&(args.cid=args.nid,args.nid=args.cid-1,args.nid=args.nid<0?args.count-1:args.nid,args.dir="r",_this.effect(args))}),args.next.on("click",function(){_this.quick(args)&&(args.cid=args.nid,args.nid=args.cid+1,args.nid=args.nid>=args.count?0:args.nid,args.dir="l",_this.effect(args))})},auto:function(args){var _this=this;args.cid=args.nid,args.nid=args.cid+1>=args.count?0:args.cid+1,args.dir="l",_this.effect(args)},main:function($this,args){var _this=this;opts.isDot&&(args.dot=$this.find(".fs-dot").children(),opts.isDotEmit?_this.btnDot(args):args.dot.parent().addClass("not")),opts.isPN&&(args.prev=$this.find(".fs-prev"),args.next=$this.find(".fs-next"),_this.btnLR(args)),$this.hover(function(){_this.clear(args),opts.isPN&&!opts.isPNOpen&&(args.prev.css("display","block"),args.next.css("display","block"))},function(){opts.isAuto&&(args.time=setInterval(function(){_this.auto(args)},opts.speed)),opts.isPN&&!opts.isPNOpen&&(args.prev.css("display","none"),args.next.css("display","none"))}),opts.isAuto&&(args.time=setInterval(function(){_this.auto(args)},opts.speed)),_this.callback(args)}};return methods.config(),this.each(function(){var $this=$(this),args={};return methods.init($this,args)?void(args.count>1&&methods.main($this,args)):(alert("Slide好像有问题~"),!0)})}}(jQuery);